<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>skil</title>
    <style>
      :root {
        color-scheme: light dark;
        --bg: #ffffff;
        --fg: #000000;
      }

      @media (prefers-color-scheme: dark) {
        :root {
          --bg: #000000;
          --fg: #ffffff;
        }
      }

      * {
        box-sizing: border-box;
      }

      html,
      body {
        margin: 0;
        width: 100%;
        height: 100%;
      }

      body {
        display: grid;
        place-items: center;
        background: var(--bg);
        color: var(--fg);
        font-family: "SFMono-Regular", Menlo, Consolas, "Liberation Mono", monospace;
      }

      .logo {
        font-size: clamp(2rem, 8vw, 6rem);
        line-height: 1;
        letter-spacing: 0.02em;
        user-select: none;
        white-space: pre;
      }
    </style>
  </head>
  <body>
    <div class="logo" id="logo">&gt;skil</div>

    <script>
      (() => {
        const stableText = "skil";
        const charset = "!\"#$%&'()*+,-./0123456789:;<=>?@[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~";
        const logo = document.getElementById("logo");

        const randomChar = () => charset[Math.floor(Math.random() * charset.length)];

        let stabilized = 0;

        const tick = () => {
          if (stabilized >= stableText.length) {
            logo.textContent = `>${stableText}`;
            return;
          }

          let out = ">";
          for (let i = 0; i < stableText.length; i++) {
            out += i < stabilized ? stableText[i] : randomChar();
          }
          logo.textContent = out;

          const delay = 36;
          const flipsBeforeNext = 5 - stabilized;

          let remaining = Math.max(2, flipsBeforeNext);
          const jitter = () => {
            if (remaining <= 0) {
              stabilized += 1;
              tick();
              return;
            }

            let jitterOut = ">";
            for (let i = 0; i < stableText.length; i++) {
              jitterOut += i < stabilized ? stableText[i] : randomChar();
            }
            logo.textContent = jitterOut;
            remaining -= 1;
            setTimeout(jitter, delay);
          };

          setTimeout(jitter, delay);
        };

        tick();
      })();
    </script>
  </body>
</html>
